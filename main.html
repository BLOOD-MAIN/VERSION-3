<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BLOOD XMD MINI PRO ‚Äì Dark Professional</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
<style>
/* Reset */
*{margin:0;padding:0;box-sizing:border-box;font-family:'Montserrat',sans-serif;}
html, body{height:100%;width:100%;overflow-x:hidden;transition:background 0.5s ease;}

/* Background Image with Overlay */
body{
  display:flex;
  justify-content:center;
  align-items:center;
  background: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)),
              url('https://files.catbox.moe/hy2d8s.jpg') no-repeat center center;
  background-size: cover;
  /* Blur animation removed, only brightness changes */
  animation: bgFade 12s ease-in-out infinite alternate;
}

/* Background Animation - only brightness */
@keyframes bgFade{
  0%{filter: brightness(0.9);}
  50%{filter: brightness(1.1);}
  100%{filter: brightness(0.9);}
}

/* Container */
.container{position:relative;width:100%;max-width:500px;padding:20px;}

/* Glassmorphism Box */
.box{
  background: rgba(0,0,0,0.4);
  backdrop-filter: blur(15px);
  border-radius:25px;
  padding:40px 30px;
  text-align:center;
  box-shadow:0 15px 40px rgba(0,0,0,0.5);
  color:#fff;
  position:relative;
  overflow:hidden;
  animation: float 4s ease-in-out infinite;
}
@keyframes float{0%,100%{transform:translateY(0);}50%{transform:translateY(-10px);}}

/* Typography */
h3{margin-bottom:10px;font-size:1.6rem;font-weight:700;color:#fff;}
h4{margin-bottom:15px;font-size:1.2rem;background:linear-gradient(90deg,#ff0080,#7928ca,#00f260);-webkit-background-clip:text;color:transparent;}
h6{margin-bottom:25px;font-size:0.9rem;color:#ccc;}

/* Input Container */
.input-container{display:flex;flex-direction:column;gap:15px;margin-bottom:20px;}
select,input{padding:14px 12px;border-radius:15px;border:none;outline:none;font-size:15px;background:rgba(255,255,255,0.1);color:#fff;transition:all 0.3s;}
select:hover,input:focus{box-shadow:0 0 12px #ff0080;}
input::placeholder{color:#bbb;opacity:0.7;}

/* Button with Ripple Animation */
button{
  padding:14px;
  border:none;
  border-radius:15px;
  font-weight:700;
  font-size:1rem;
  color:#fff;
  cursor:pointer;
  background: linear-gradient(135deg,#ff0080,#7928ca,#00f260);
  position:relative;
  overflow:hidden;
  transition:all 0.3s;
}
button:hover{transform:scale(1.05);}
button::after{
  content:"";
  position:absolute;
  width:100px;
  height:100px;
  background:rgba(255,255,255,0.3);
  display:block;
  border-radius:50%;
  pointer-events:none;
  transform:scale(0);
  opacity:0;
  transition:transform 0.5s, opacity 1s;
}
button:active::after{
  transform:scale(3);
  opacity:1;
  transition:0s;
}

/* Messages */
.message{margin-top:12px;font-weight:700;}
.message.error{color:#ff4b5c;}
.message.success{color:#32ff7e;cursor:pointer;}

/* Spinner */
.spinner{
  border:4px solid rgba(255,255,255,0.2);
  border-top:4px solid #32ff7e;
  border-radius:50%;
  width:40px;
  height:40px;
  animation:spin 1s linear infinite;
  margin:10px auto;
}
@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}

/* QR Code */
#qrcode{margin-top:15px; transition: all 0.5s ease-in-out; opacity:0;}
#qrcode.active{opacity:1; transform:scale(1.1);}

/* History */
#history{margin-top:15px;max-height:80px;overflow-y:auto;text-align:left;font-size:0.85rem;color:#fff;}

/* Confetti */
.confetti-piece{position:absolute;width:6px;height:6px;opacity:0.8;animation:confettiFall 3s linear forwards;}
@keyframes confettiFall{0%{transform:translateY(0) rotate(0deg);}100%{transform:translateY(200px) rotate(360deg); opacity:0;}}

/* Theme Toggle */
#themeToggle{position:absolute;top:15px;right:15px;padding:8px 12px;border:none;border-radius:12px;cursor:pointer;font-weight:bold;background: rgba(255,255,255,0.2);color:#fff;transition:all 0.3s;}
#themeToggle:hover{background: rgba(255,255,255,0.4);}

/* Responsive */
@media(max-width:480px){.box{padding:25px 20px;}h3{font-size:1.3rem;}h4{font-size:1.1rem;}}
</style>
</head>

<body>

<div class="container">
  <div class="box">
    <button id="themeToggle">Toggle Theme</button>
    <i class="fas fa-user-circle fa-3x"></i>
    <h3>Link with phone number</h3>
    <h4>üèÆ BLOOD XMD MINI PRO üèÆ</h4>
    <h6>Select Your Country and Enter Number</h6>

    <div class="input-container">
      <select id="country">
        <option value="+94">üá±üá∞ Sri Lanka (+94)</option>
        <option value="+91">üáÆüá≥ India (+91)</option>
        <option value="+1">üá∫üá∏ USA (+1)</option>
        <option value="+44">üá¨üáß UK (+44)</option>
      </select>
      <input type="number" id="number" placeholder="Eg: 740026280">
      <button id="submit">Submit</button>
    </div>

    <div class="message" id="waiting" style="display:none;">
      <div class="spinner"></div>
      Processing...
    </div>
    <div class="message" id="result"></div>
    <div id="qrcode"></div>
    <div id="history"></div>
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script>
const submitBtn=document.getElementById("submit");
const numberInput=document.getElementById("number");
const countrySelect=document.getElementById("country");
const resultDiv=document.getElementById("result");
const waitingDiv=document.getElementById("waiting");
const qrDiv=document.getElementById("qrcode");
const historyDiv=document.getElementById("history");
const themeToggle=document.getElementById("themeToggle");
const body=document.body;
let submissionHistory=[];

// Theme toggle
themeToggle.addEventListener("click",()=>{
  body.classList.toggle("dark");
  body.classList.toggle("light");
});

// Copy + confetti
function copyToClipboard(text){
  navigator.clipboard.writeText(text).then(()=>{
    createConfetti();
    alert("Copied ‚úÖ");
  });
}

// Confetti
function createConfetti(){
  for(let i=0;i<30;i++){
    const conf=document.createElement('div');
    conf.classList.add('confetti-piece');
    conf.style.left=Math.random()*100+'%';
    conf.style.backgroundColor=`hsl(${Math.random()*360},100%,50%)`;
    document.body.appendChild(conf);
    setTimeout(()=>conf.remove(),3000);
  }
}

// Submit handler
submitBtn.addEventListener("click",async(e)=>{
  e.preventDefault();
  const number=numberInput.value.trim();
  const countryCode=countrySelect.value;
  if(!number||number.length<7){
    resultDiv.innerHTML="‚ùå Invalid number!";
    resultDiv.className="message error";
    qrDiv.innerHTML="";
    qrDiv.classList.remove("active");
    return;
  }
  const fullNumber=countryCode+number;
  waitingDiv.style.display="block";
  resultDiv.innerHTML="";
  qrDiv.innerHTML="";
  qrDiv.classList.remove("active");

  try{
    // Mock API request - replace with your backend endpoint
    const {data}=await axios.get(`/code?number=${fullNumber}`);
    const code=data.code||"Service Unavailable";

    waitingDiv.style.display="none";
    resultDiv.innerHTML=`CODE: <span style="color:#32ff7e;font-weight:bold">${code}</span> ‚úÖ <br>
    <button onclick="copyToClipboard('${code}')">Copy</button><br>
    <a href="https://wa.me/${fullNumber}" target="_blank">Open WhatsApp</a>`;
    resultDiv.className="message success";

    submissionHistory.unshift(fullNumber);
    if(submissionHistory.length>5) submissionHistory.pop();
    historyDiv.innerHTML=submissionHistory.map(n=>`‚Ä¢ ${n}`).join("<br>");

    // QR Code
    new QRCode(qrDiv,{text:`https://wa.me/${fullNumber}`,width:150,height:150});
    qrDiv.classList.add("active");
  }catch(err){
    waitingDiv.style.display="none";
    resultDiv.innerHTML="‚ùå Error fetching code!";
    resultDiv.className="message error";
  }
});
</script>

</body>
</html>